.data
LAST_DURATION:	.word 0		# duracao da ultima nota
LAST_PLAYED:	.word 0		# quando a ultima nota foi tocada
JOJO_NUM:	.word 688	# total de notas
JOJO_NOTAS:	48,886,48,204,50,0,50,204,51,0,51,477,47,0,46,473,47,4,46,472,48,4,48,272,55,0,55,272,54,0,54,272,48,0,48,272,51,0,51,409,48,0,48,340,48,0,48,409,51,0,51,340,50,0,50,409,48,0,48,272,55,0,55,272,54,0,54,272,48,0,48,272,48,0,48,204,48,0,48,204,48,0,48,477,48,0,48,204,53,0,53,272,51,0,51,272,49,0,49,272,48,0,48,272,55,0,55,272,54,0,54,272,48,0,48,272,48,0,48,204,48,0,48,204,48,0,48,340,48,0,48,340,51,0,51,545,55,0,55,545,60,0,60,2181,84,68,84,68,82,0,82,68,79,0,79,68,77,0,77,136,56,0,56,68,63,0,63,68,67,0,67,68,68,0,68,68,72,0,72,68,74,0,74,68,75,0,75,68,80,0,80,68,82,0,82,68,36,68,36,136,36,0,36,136,43,0,43,136,39,0,39,136,48,0,48,136,39,0,39,136,39,0,39,272,36,0,36,136,36,0,36,136,43,0,43,136,44,0,44,136,48,0,48,136,44,0,44,136,44,0,44,272,43,0,43,136,43,0,43,136,43,0,43,136,39,0,39,136,46,0,46,136,38,0,38,136,38,0,38,136,38,0,38,136,44,0,44,136,44,0,44,272,43,0,43,272,41,0,41,136,41,0,41,136,41,0,41,136,48,0,48,136,48,0,48,136,36,0,51,136,36,0,51,136,51,0,51,272,50,0,50,272,51,0,51,136,50,0,50,272,51,0,51,136,53,0,53,272,51,0,51,272,51,0,51,204,50,0,50,204,51,0,51,136,53,0,53,204,51,0,51,136,50,0,50,204,56,0,56,136,56,0,56,136,51,0,51,136,51,0,51,136,55,0,55,136,55,0,55,136,50,0,50,136,50,0,50,136,51,0,51,136,50,0,50,272,51,0,51,136,53,0,53,272,51,0,51,272,55,0,55,272,57,0,57,272,58,0,58,272,57,272,57,136,57,0,57,272,58,0,58,136,60,0,60,272,58,0,58,272,61,0,61,272,63,0,63,272,65,0,65,272,65,0,65,136,65,0,65,136,64,0,64,409,60,0,60,272,60,0,60,136,60,0,60,136,60,0,60,136,64,0,64,272,60,135,60,137,60,0,60,272,58,0,58,136,58,0,58,136,57,0,57,272,58,0,58,136,58,0,58,272,60,0,60,954,69,136,69,409,61,0,61,204,60,0,60,204,61,0,61,136,63,0,63,272,61,0,61,272,60,0,60,272,61,0,61,545,61,272,61,204,60,0,60,204,61,0,61,136,63,0,63,204,61,0,61,204,60,0,60,136,58,0,58,409,53,136,53,136,53,0,53,136,61,273,61,205,60,0,60,205,61,0,61,135,61,0,61,273,61,0,61,272,57,0,57,273,58,0,58,409,61,406,61,204,60,0,60,204,61,0,61,136,63,0,63,204,61,0,61,204,63,0,63,136,65,0,65,681,65,136,65,136,64,0,64,136,65,0,65,272,68,0,68,272,67,0,67,272,63,0,63,272,65,0,65,272,58,0,58,272,61,0,61,545,72,0,72,136,72,0,72,136,70,0,70,136,72,0,72,136,79,136,79,136,72,0,72,136,77,136,77,272,79,0,79,818,79,0,79,136,77,0,77,136,77,0,77,1363,73,0,72,136,73,0,70,136,72,0,68,136,70,0,53,136,68,0,53,409,53,0,55,136,53,0,56,272,55,0,59,272,56,0,63,272,59,0,62,545,63,0,60,272,62,0,60,272,60,0,55,136,60,0,60,136,55,0,60,272,60,0,55,136,60,0,60,136,55,0,62,136,60,0,63,136,62,0,65,136,63,0,60,136,65,0,60,272,60,136,55,272,60,0,60,136,55,0,55,136,60,0,60,136,55,0,55,136,60,0,60,136,55,0,62,136,60,0,63,136,62,0,65,272,63,0,60,272,65,0,60,272,61,272,56,136,61,0,61,136,56,0,56,136,61,0,61,136,56,0,56,136,61,0,61,136,56,0,63,136,61,0,64,136,63,0,66,272,64,0,68,272,66,0,68,272,68,272,67,190,68,0,65,189,67,0,68,193,65,0,67,189,68,0,65,178,67,0,65,148,65,0,65,272,65,272,65,136,65,0,67,136,65,0,67,272,67,0,67,272,67,0,51,136,67,0,51,135,51,135,51,137,55,0,51,135,55,0,51,136,51,135,51,136,55,0,51,136,55,0,51,135,51,136,51,136,55,0,51,135,55,0,51,135,63,1,63,409,63,0,65,136,63,0,63,272,65,0,63,272,63,0,62,204,63,0,63,204,62,0,65,170,63,0,63,238,65,0,62,272,63,0,60,409,62,0,60,545,70,136,55,272,70,0,55,272,55,0,58,272,55,0,56,272,58,0,56,272,56,0,56,136,56,0,56,272,58,409,58,272,58,0,58,272,58,0,58,272,58,0,60,136,58,0,60,1227,55,272,55,272,55,0,67,272,55,0,68,272,67,0,67,272,68,0,65,136,67,0,61,681,65,0,61,272,56,136,56,272,58,136,55,272,58,0,55,136,55,0,55,136,55,0,55,136,63,409,65,136,63,0,63,136,65,0,62,272,63,0,55,272,62,0,55,272,55,0,60,272,55,0,65,545,60,0,64,545,65,0,63,272,64,0,53,818,63,0,53,136,53,0,55,136,53,0,55,136,55,0,60,136,55,0,60,136,60,0,65,136,60,0,65,136,65,0,55,136,65,0,55,136,55,0,56,136,55,0,56,136,56,0,60,136,56,0,60,136,60,0,65,136,60,0,65,136,65,0,58,136,65,0,58,136,58,0,59,136,58,0,59,136,59,0,61,136,59,0,61,136,61,0,62,136,61,0,62,136,62,0,65,136,62,0,65,136,65,0,66,136,65,0,66,136,66,0,68,136,66,0,68,136,68,0,70,136,68,0,70,136,70,0,70,136,67,545,67,136,67,0,70,954,67,0,72,954,70,0,72,1772,72,0,72,272,72,0,75,272,72,0,74,182,75,0,70,181,74,0,72,182,70,0,65,182,72,0,67,181,65,0,63,182,67,0,59,182,63,0,55,181,59,0,48,182,55,0,48,545
LAMAR_NUM:	.word 12
LAMAR_NOTAS:	76,0,76,68,79,68,79,68,88,68,88,68,84,68,84,68,86,68,86,68,91,68,91,68
ZELDA_NUM: 	.word 300
ZELDA_NOTAS: 	60,0,60,600,59,0,59,200,60,0,60,600,59,0,59,200,60,0,60,200,62,0,62,200,63,0,63,200,65,0,65,200,67,0,67,400,60,0,60,400,67,0,67,400,72,0,72,400,70,0,70,200,68,0,68,200,67,0,67,200,65,0,65,200,63,0,63,400,62,0,62,200,60,0,60,200,59,0,59,400,55,0,55,400,60,0,60,600,59,0,59,200,60,0,60,600,59,0,59,200,60,0,60,200,62,0,62,200,63,0,63,200,65,0,65,200,67,0,67,400,60,0,60,400,65,0,65,400,68,0,68,400,67,0,67,200,65,0,65,200,63,0,63,200,62,0,62,200,62,0,62,600,60,0,60,200,60,0,60,800,60,0,60,600,59,0,59,200,60,0,60,600,59,0,59,200,60,0,60,200,62,0,62,200,63,0,63,200,65,0,65,200,67,0,67,400,60,0,60,400,67,0,67,400,72,0,72,400,70,0,70,200,68,0,68,200,67,0,67,200,65,0,65,200,63,0,63,400,62,0,62,200,60,0,60,200,59,0,59,400,55,0,55,400,60,0,60,600,59,0,59,200,60,0,60,600,59,0,59,200,60,0,60,200,62,0,62,200,63,0,63,200,65,0,65,200,67,0,67,400,60,0,60,400,65,0,65,400,68,0,68,400,67,0,67,200,65,0,65,200,63,0,63,200,62,0,62,200,62,0,62,600,60,0,60,200,60,0,60,800,70,0,70,400,67,0,67,200,68,0,68,200,70,0,70,400,67,0,67,200,68,0,68,200,70,0,70,400,75,0,75,200,74,0,74,200,72,0,72,400,70,0,70,400,72,0,72,400,68,0,68,200,70,0,70,200,68,0,68,400,67,0,67,400,68,0,65,0,68,1600,65,0,65,400,65,0,62,0,62,200,63,0,63,200,65,0,65,400,62,0,62,200,63,0,63,200,65,0,65,400,74,0,74,200,72,0,72,200,70,0,70,400,68,0,68,400,68,0,68,400,70,0,70,200,68,0,68,200,67,0,67,400,65,0,65,400,67,0,63,0,67,1600,70,0,63,200,70,200,67,0,67,200,68,0,68,200,70,0,70,400,67,0,67,200,68,0,68,200,70,0,70,400,75,0,75,200,74,0,74,200,72,0,72,400,70,0,70,400,72,0,72,400,68,0,68,200,70,0,70,200,68,0,68,400,67,0,67,400,68,0,68,1600,65,0,65,400,62,0,62,200,63,0,63,200,65,0,65,400,62,0,62,200,63,0,63,200,65,0,65,400,74,0,74,200,72,0,72,200,70,0,70,400,68,0,68,400,67,0,67,400,65,0,65,200,63,0,63,200,62,0,62,600,63,0,63,200,63,0,63,1600

.text
PLAY:	la t1,LAST_PLAYED	# endereço do last played
	lw t1,0(t1)		# t1 = last played
	beq t1,zero,P_CONT	# if last played == 0 THEN continue loop (primeira ocorrência)

	li a7,30		# define o syscall Time
	ecall			# time
	la t0,LAST_DURATION	# endereço da last duration
	lw t0,0(t0)		# t0 = duracao da ultima nota
	sub t1,a0,t1		# t1 = agora - quando a ultima nota foi tocada (quanto tempo passou desde a ultima nota tocada)
	bge t1,t0,P_CONT	# if t1 >= last duration THEN continue loop (se o tempo que passou for maior que a duracao da nota, toca a proxima nota)
	ret			# retorna ao main loop

P_CONT:	bne s0,s1,P_NOTE	# if s0 != s1 THEN toca a proxima nota		# reseta os valores padrões (a musica vai ficar tocando num loop) (define o valor de retorno em a0)
	ret			# volta ao main loop

P_NOTE:	
	lw a0,0(s2)		# le o valor da nota
	lw a1,4(s2)		# le a duracao da nota
	li a2,0
	li a3,127
	li a7,31		# define a chamada de syscall
	ecall			# toca a nota
	
	la t0,LAST_DURATION	# endereço da last duration
	sw a1,0(t0)		# salva a duracao da nota atual no last duration

	li a7,30		# define o syscall Time
	ecall			# time
	la t0,LAST_PLAYED	# endereço do last played
	sw a0,0(t0)		# salva o instante atual no last played

	addi s2,s2,8		# incrementa para o endereço da próxima nota
	addi s0,s0,1		# incrementa o contador de notas
	ret			# volta ao main loop

# define os valores padrões
#a0 = musica escolida
SET_PL: 
	li s0,0	
	li t6,1		# contador notas
	li t5,2
	beq a0,t6,SET_PL_LAMAR
	beq  a0,t5,SET_PL_ZELDA
SET_PL_JOJO:	
	la t0,JOJO_NUM		# endereço do total de notas
	lw s1,0(t0)		# total de notas
	la s2,JOJO_NOTAS
	beqz zero, SET_PL_END		# endereço das notas
SET_PL_LAMAR:  
	la t0,LAMAR_NUM		# endereço do total de notas
	lw s1,0(t0)		# total de notas
	la s2,LAMAR_NOTAS	
	beqz zero, FINAL
SET_PL_ZELDA:
	la t0,ZELDA_NUM		# endereço do total de notas
	lw s1,0(t0)		# total de notas
	la s2,ZELDA_NOTAS	
SET_PL_END:	ret
